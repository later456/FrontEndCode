<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>在线工具 </title>
<meta name="keywords" content="在线工具">
<meta name="applicable-device" content="pc">
<meta name="siteBaseUrl" content="https://www.wanghu21.xyz">
<link rel="icon" type="image/x-ico" href="../w.png" />
<link rel="stylesheet" href="../../View/style/main-1.css">
<script type="text/javascript" src="../../ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="../../Plugin/com.min.js"></script>
<script type="text/javascript" src="../../View/js/min-2.js"></script>

    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="static/js/jquery.min1.js"></script>
    
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="static/js/bootstrap.min.js"></script>
    
    <!-- 页面通用自定义css文件 -->
    <link rel="stylesheet" href="static/css/style.css">

    <script type="text/javascript" src="static/js/scrolltopcontrol.js"></script>
 
  
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?74847c14327db1f3a2f88c2583154efe";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    

  

    <link href="static/css/jsoneditor.min.css" media="all" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="static/js/jsoneditor.min.js"></script>


<style type="text/css">
* {
    transition: null;
	-webkit-transition: null;
	-moz-transition: null;
	-o-transition: null;
	-ms-transition: null;
}


.container {
    width: 98%;
}
.jsoneditor-poweredBy {
    display: none;
}
div.jsoneditor-menu {
    background-color: #96b97d;
}
div.jsoneditor {
    border: 1px solid #96b97d;
}
@media (min-width: 768px) {
    .col-sm-2 {
        width: 4%;
        margin-left: -15px;
    }
    .col-sm-5 {
        width: 48%
    }
}
</style>

</head> 

	<script>
    var xlm_wid='15877';
    var xlm_url='https://www.xianliao.me/';
   </script>
   <script type='text/javascript' charset='UTF-8' src='https://www.xianliao.me/embed.js'></script>
                                                
<div class="headerContainer headerBg dianyingdianshi"><div class="headerInner">
	<div class="headerLeft">
		<div class="headerLogo"><a href="../../index.html"></a></div>		
		<div class="headerMenu">
			<li class="selected"><a href="../../index.html">首页</a></li>
            <li><a title="资源管理平台，仅个人使用" href="http://www.wanghu21.xyz:9601">个人文件管理</a></li>
            <li><a href="###">工具下载</a></li>
            <li><a href="../../liuyanban.html">问题反馈</a></li>
            <li><a title="勿点击，此项仅为个人作业发布使用" href="###">个人作业发布</a></li>       
		</div>
	</div>
	<!---headerLeft--->
	<div class="headerRight">
		<div class="headerUserMenu">
			 
			<li class="headerUserPopMenu">
							</li>
		</div>
	</div>
	<!---headerRight--->
    </div>
         <div class="soFormContainer"><div class="soInner">
                            <!--<div class="soTypeTab">
                    <li id="76"><a href="">站内</a></li>
                    <li id="102"><a href="">网页</a></li>
                    <li id="99"><a href="">影视</a></li>
                    <li id="100"><a href="">网盘</a></li>
                    <li id="101"><a href="">磁力</a></li>
                    <li id="94"><a href="">小说</a></li>
                        </div>-->
        <!--<div class="soForm">
    	<form method="post" action="https://www.wanghu21.xyz/So/go/" target="_blank">
        <input id="soAutoTip" type="hidden">
        <input id="souId" name="souId" type="hidden">
        <div class="soOuter"><div class="input">
            <input type="text" id="soInput" name="soInput" value="" incolor="#555" outcolor="#aaa" sotype="2">
        </div></div>
        <div class="subBtn"><a id="soSubmit" href=""></a></div>
        </form>
    </div>-->
    <br/><br/><br/><br/>
    <div class="soItems">
        <li><a href="">&nbsp;</a></li>
    </div>
</div></div></div>
<!---headerContainer--->
	                      <div class="scrollNav scrollNav_typeNav scrollNav_headerNav"><div class="mainContainer xscrollMenu_outer"><div class="xscrollMenu">
	                      	<li>                <a href="../xuexiyuandi/index.html">学习园地</a></li><li class="sp"></li>
                            <li>                <a href="../ruanjiangongju/index.html">软件工具</a></li><li class="sp"></li> 
                            <li>                <a href="http://user.wanghu21.xyz/type/ziyuansousuo/shujujiansuo.html">数据检索</a></li><li class="sp"></li>
                            <li class="selected">             <a href="../zaixiangongju/index1.html">在线工具</a></li><li class="sp"></li>
                            <li>                <a href="../shejidaohang/index.html">设计导航</a></li><li class="sp"></li>
                            <li >               <a href="../dianyingdianshi/index.html">电影电视</a></li><li class="sp"></li>
                            <li>                <a href="../dongmanciyuan/index.html">动漫次元</a></li><li class="sp"></li>
                            
 
                                    </div></div></div>
                                    <br/>

<div class="container">
    



<div class="panel panel-default">
    <div class="panel-heading">JSON 在线解析</div>
    <div class="panel-body">
        <form class="form-inline" role="form" style="margin-bottom: 10px">
            <button type="button" class="btn btn-success" id="submitBTN" onclick="beautify();">
                <span class="glyphicon glyphicon-send" aria-hidden="true"></span> 格式化
            </button>
            <button type="button" class="btn btn-default" id="submitBTN2" onclick="minify();">
                <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> 压缩
            </button>
            <button type="button" class="btn btn-warning" id="submitBTN3">验证</button>
            <button type="button" class="btn btn-warning" onclick="jsonToxml();">JSON 转 XML</button>
            <button type="button" class="btn btn-warning" onclick="jsonTocsv();">JSON 转 CSV</button>
            <button type="button" class="btn btn-warning" onclick="jsonToyaml();">JSON 转 YAML</button>
        </form>
		
		<div class="col-md-12" id="warning" style="display: none;">
            <div class="alert alert-warning">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                <p><strong>警告！</strong>JSON 格式错误。</p>
                <p id="warning-info"></p>
            </div>
		</div>
		
        <div class="row">
            <div class="col-sm-5">
                <div id="jsoneditor1" style="height: 600px; width: 100%"></div>
            </div>
            <div class="col-sm-2">  
                <p><button id="toTree"><span class="glyphicon glyphicon-arrow-right"></span></button></p>
                <p><button id="toCode"><span class="glyphicon glyphicon-arrow-left"></span></button></p>
            </div>
            <div class="col-sm-5">
                <div id="jsoneditor2" style="height: 600px; width: 100%"></div>
            </div>
        </div>
        
	</div>
</div>

<script type="text/javascript" src="static/js/jquery.format.js"></script>
<script type="text/javascript" src="static/js/ObjTree.min.js"></script>
<script>

// create the editor
var container1 = document.getElementById('jsoneditor1');
var container2 = document.getElementById('jsoneditor2');

var optionsOutput1 = {
	mode : 'code',
	error : function(err) {
		alert('EF1 ->' + err.toString());
	}
};

var optionsOutput2 = {
	mode : 'tree',
	modes : [ 'view', 'form', 'text','code', 'tree'], // allowed modes
	error : function(err) {
		alert('EF1 ->' + err.toString());
	}
};
var json ={"sites":{"site":[{"id":"1","name":"百度","url":"baidu.com"},{"id":"2","name":"4399","url":"4399.com"},{"id":"3","name":"w3school","url":"w3school.com.cn"}]}};

var editor1 = new JSONEditor(container1, optionsOutput1, json);
var editor2 = new JSONEditor(container2, optionsOutput2, json);
editor2.expandAll();

$("#toTree").click(function() {
	var jsonStr = editor1.getText();
	editor2.setText(jsonStr);
	editor2.setMode("tree");
	editor2.expandAll();
});
$("#toCode").click(function() {
	var jsonStr = editor2.getText();
	var jsonObject = JSON.parse(jsonStr);
	editor1.setText(JSON.stringify(jsonObject, null, 2));
	editor1.setMode("code");
})



function beautify() {
	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}
	try {

		var jsonStr = editor1.getText();

		var jsonObject = JSON.parse(jsonStr);
		editor1.setMode("code");
		editor1.setText(JSON.stringify(jsonObject, null, 2));
		
		editor2.setText(JSON.stringify(jsonObject, null, 0));
		editor2.setMode("tree");
		editor2.expandAll()

		
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}
}
function minify() {

	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}


	try {
		var jsonStr = editor1.getText();

		var jsonObject = JSON.parse(jsonStr);
		
		editor1.setMode("code");
		editor1.setText(JSON.stringify(jsonObject, null, 0));
		editor2.setText(JSON.stringify(jsonObject, null, 0));
		editor2.setMode("tree");
		
		editor2.expandAll()
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}
}
$("#submitBTN3").click(function() {
	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}
	
	try {
		var jsonStr = editor1.getText();
		var json = JSON.parse(jsonStr);
		$("#warning").html("<div class=\"alert alert-success\">JSON 数据合法</div>").show().delay(5000).fadeOut();
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}

});
function jsonToxml() {

	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}


	try {
		var jsonStr = editor1.getText();
		var json = JSON.parse(jsonStr);
		var xotree = new XML.ObjTree();
		var xml = xotree.writeXML(json);
		xml = decodeSpecialCharacter(xml);
		editor2.setMode("text");		
		formatXML =  $.format(xml, {method: 'xml'});
		editor2.setText(formatXML);
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}
}
function decodeSpecialCharacter(str) {
	return str.replace(/\&amp;/g, '&').replace(/\&gt;/g, '>').replace(/\&lt;/g,
			'<').replace(/\&quot;/g, '"');
}

function jsonTocsv() {

	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}

	try {
		var jsonStr = editor1.getText();
		var json = JSON.parse(jsonStr);
		var csv = jsonTocsvbyjson(json);
		editor2.setMode("text");	
		editor2.setText(csv);

		
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}
}
function jsonTocsvbyjson(data) {

	arr = [];
	flag = true;

	var header = "";
	var content = "";
	var headFlag = true;

	try {

		var type1 = typeof data;

		if (type1 != "object") {
			data = processJSON($.parseJSON(data));
		} else {
			data = processJSON(data);
		}

	} catch (e) {
		setMessage("error", "Error in Convert : add proper input format");
		return false;
	}

	$.each(data, function(k, value) {
		if (k % 2 == 0) {
			if (headFlag) {
				if (value != "end") {
					header += value + ",";
				} else {
					// remove last colon from string
					header = header.substring(0, header.length - 1);
					headFlag = false;
				}
			}
		} else {
			if (value != "end") {
				var temp = data[k - 1];
				if (header.search(temp) != -1) {
					content += value + ",";
				}
			} else {
				// remove last colon from string
				content = content.substring(0, content.length - 1);
				content += "\n";
			}
		}

	});

	return (header + "\n" + content);
}
function processJSON(data) {

	$.each(data, function(k, data1) {

		var type1 = typeof data1;

		if (type1 == "object") {

			flag = false;
			processJSON(data1);
			arr.push("end");
			arr.push("end");

		} else {
			arr.push(k, data1);
		}

	});

	return arr;
}

function jsonToyaml() {

	var content = editor1.getText();

	if (content.trim().length == 0) {
		return false;
	}

	try {
		var jsonStr = editor1.getText();
		var yaml = json2yaml(jsonStr);
		editor2.setMode("text");
		editor2.setText(yaml);
	} catch (e) {
		$("#warning").html("<div class=\"alert alert-danger\">JSON 数据错误："+e+"</div>").show().delay(5000).fadeOut();
	}
	last_action = "jsonToyaml";
}

var spacing = " ";
function json2yaml(obj) {

  if (typeof obj == 'string') {
    obj = JSON.parse(obj);
  }

 
  var ret = [];
  console.log(typeof obj);
  convert(obj, ret);
  return ret.join("\n");
};


function getType(obj) {
  var type = typeof obj;
  
  if (obj instanceof Array) {
    return 'array';
  } else if (type == 'string') {
    return 'string';
  } else if (type == 'boolean') {
    return 'boolean';
  } else if (type == 'number') {
    return 'number';
  } else if (type == 'undefined' || obj === null) {
    return 'null';
  } else {
    return 'hash';
  }
}

function convert(obj, ret) {
  var type = getType(obj);

  switch(type) {
    case 'array':
      convertArray(obj, ret);
      break;
    case 'hash':
      convertHash(obj, ret);
      break;
    case 'string':
      convertString(obj, ret);
      break;
    case 'null':
      ret.push('null');
      break;
    case 'number':
      ret.push(obj.toString());
      break;
    case 'boolean':
      ret.push(obj ? 'true' : 'false');
      break;
  }
}
function convertArray(obj, ret) {
  for (var i=0; i<obj.length; i++) {
    var ele = obj[i];
    var recurse = [];
    convert(ele, recurse);

    for (var j=0; j<recurse.length; j++) {
      ret.push((j == 0 ? "- \n   " : spacing) + recurse[j]);
    }
  }
}

function convertHash(obj, ret) {
  for (var k in obj) {
    var recurse = [];
    if (obj.hasOwnProperty(k)) {
      var ele = obj[k];
      convert(ele, recurse);
      var type = getType(ele);
      if (type == 'string' || type == 'null' || type == 'number' || type == 'boolean') {
        ret.push(normalizeString(k) + ': ' + recurse[0]);
      } else {
        ret.push(normalizeString(k) + ': ');
        for (var i=0; i<recurse.length; i++) {
          ret.push(spacing + recurse[i]);
        }
      }
    }
  }
}

function normalizeString(str) {
  if (str.match(/^[\w]+$/)) {
    return str;
  } else {
    return JSON.stringify(str);
  }
}

function convertString(obj, ret) {
  ret.push(normalizeString(obj));
}
</script>


<div class="panel panel-default">
    <div class="panel-heading">工具简介</div>
    <div class="panel-body">
        <p>JSON 在线解析是一款 JSON 格式化工具，你可以在线验证、编辑和格式化 JSON 数据，格式化后的 JSON 数据以树形结构展示，更易于阅读，此外还可以将 JSON 转换为 XML、YAML、CSV格式。</p>
    </div>
</div>

<!--公共foot部分开始（本footer由代码动态生成）-->

<footer >
  
    <div class="text-center copyright">
      <span><a style="color: #040505;"><p> <a style="color: #040505;"></a></a><br/> <a href="http://www.beian.miit.gov.cn/" style="color: #040505;">鄂ICP备19025076号-1</p></a></span>
    </div>
</footer>

</div><!--class="container"中部容器-->

<!--孟坤工具箱网页版通用js文件-->
<script type="text/javascript" src="static/js/jquery.mktoolbox.js"></script>

<style></body></style>

</body> 
</html> 
