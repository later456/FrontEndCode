!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(a,b){"use strict";function c(a){function b(a){return null===i?void k.push(a):void f(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void e(b.bind(a),c,g)}i=!0,j=a,h()}catch(d){g(d)}}function g(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(e,f){b(new d(a,c,e,f))})},e(a,c,g)}function d(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function e(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var f=a("asap");b.exports=c},{asap:4}],3:[function(a,b){"use strict";function c(a){this.then=function(b){return"function"!=typeof b?this:new d(function(c,d){e(function(){try{c(b(a))}catch(e){d(e)}})})}}var d=a("./core.js"),e=a("asap");b.exports=d,c.prototype=d.prototype;var f=new c(!0),g=new c(!1),h=new c(null),i=new c(void 0),j=new c(0),k=new c("");d.resolve=function(a){if(a instanceof d)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new d(b.bind(a))}catch(e){return new d(function(a,b){b(e)})}return new c(a)},d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},d.reject=function(a){return new d(function(b,c){c(a)})},d.race=function(a){return new d(function(b,c){a.forEach(function(a){d.resolve(a).then(b,c)})})},d.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":2,asap:4}],4:[function(a,b){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:1}],5:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var a=arguments.length?this.then.apply(this,arguments):this;a.then(null,function(a){setTimeout(function(){throw a},0)})})},{}],6:[function(a){a("asap");"undefined"==typeof Promise&&(Promise=a("./lib/core.js"),a("./lib/es6-extensions.js")),a("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]);!function(a,b){function c(){var a={},b=new o(function(b,c){a.resolve=b,a.reject=c});return a.promise=b,a}function d(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function e(a){var b=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document;b.appendChild(a)}function f(a){var b=[];for(var c in a)a[c]&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}function g(a){return a.substring(a.lastIndexOf(".",a.lastIndexOf(".")-1)+1)}function h(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()}function i(a,b,c){var d=c||{};document.cookie=a.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+b.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(d.domain?";domain="+d.domain:"")+(d.path?";path="+d.path:"")+(d.secure?";secure":"")+(d.httponly?";HttpOnly":"")}function j(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return b?b[1]:void 0}function k(a,b,c){var d=new Date;d.setTime(d.getTime()-864e5);var e="/";document.cookie=a+"=;path="+e+";domain=."+b+";expires="+d.toGMTString(),document.cookie=a+"=;path="+e+";domain=."+c+"."+b+";expires="+d.toGMTString()}function l(){var b=a.location.hostname;if(!b){var c=a.parent.location.hostname;c&&~c.indexOf("zebra.alibaba-inc.com")&&(b=c)}var d=["taobao.net","taobao.com","tmall.com","tmall.hk","etao.com","alibaba-inc.com"],e=new RegExp("([^.]*?)\\.?((?:"+d.join(")|(?:").replace(/\./g,"\\.")+"))","i"),f=b.match(e)||[],g=f[2]||"taobao.com",h=f[1]||"m";"taobao.net"!==g||"x"!==h&&"waptest"!==h&&"daily"!==h?"taobao.net"===g&&"demo"===h?h="demo":"alibaba-inc.com"===g&&"zebra"===h?h="zebra":"waptest"!==h&&"wapa"!==h&&"m"!==h&&(h="m"):h="waptest";var i="etao.com"===g?"apie":"api";("taobao.com"===g||"tmall.com"===g)&&(i="h5api"),t.mainDomain=g,t.subDomain=h,t.prefix=i}function m(){var b=a.navigator.userAgent,c=b.match(/WindVane[\/\s]([\d\.\_]+)/);c&&(t.WindVaneVersion=c[1]);var d=b.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);d&&(t.AliAppName=d[1],t.AliAppVersion=d[2])}function n(a){this.id=++w,this.params=d(a||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=u.slice(0)}var o=a.Promise;if(!o){var p="当前浏览器不支持Promise，请在windows对象上挂载Promise对象可参考（http://gitlab.alibaba-inc.com/mtb/lib-es6polyfill/tree/master）中的解决方案";throw b.mtop={ERROR:p},new Error(p)}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var q,r=o.resolve();try{q=a.localStorage,q.setItem("@private","false")}catch(s){q=!1}var t={safariGoLogin:!0,useAlipayJSBridge:!1},u=[],v={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};l(),m();var w=0,x="2.4.0";n.prototype.use=function(a){if(!a)throw new Error("middleware is undefined");return this.middlewares.push(a),this},n.prototype.__processRequestMethod=function(a){var b=this.params,c=this.options;"get"===b.type&&"jsonp"===b.dataType?c.getJSONP=!0:"get"===b.type&&"originaljsonp"===b.dataType?c.getOriginalJSONP=!0:"get"===b.type&&"json"===b.dataType?c.getJSON=!0:"post"===b.type&&(c.postJSON=!0),a()},n.prototype.__processRequestType=function(a){var c=this,d=this.options;if(t.H5Request===!0&&(d.H5Request=!0),t.WindVaneRequest===!0&&(d.WindVaneRequest=!0),d.H5Request===!1&&d.WindVaneRequest===!0){if(!b.windvane||parseFloat(d.WindVaneVersion)<5.4)throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境")}else d.H5Request===!0?d.WindVaneRequest=!1:"undefined"==typeof d.WindVaneRequest&&"undefined"==typeof d.H5Request&&(b.windvane&&parseFloat(d.WindVaneVersion)>=5.4?d.WindVaneRequest=!0:d.H5Request=!0);return a?a().then(function(){var a=d.retJson.ret;return a instanceof Array&&(a=a.join(",")),d.WindVaneRequest===!0&&(!a||a.indexOf("PARAM_PARSE_ERROR")>-1||a.indexOf("HY_FAILED")>-1||a.indexOf("HY_NO_HANDLER")>-1||a.indexOf("HY_CLOSED")>-1||a.indexOf("HY_EXCEPTION")>-1||a.indexOf("HY_NO_PERMISSION")>-1)?(t.H5Request=!0,c.__sequence([c.__processRequestType,c.__processToken,c.__processRequestUrl,c.middlewares,c.__processRequest])):void 0}):void 0};var y="_m_h5_c",z="_m_h5_tk",A="_m_h5_tk_enc";n.prototype.__getTokenFromAlipay=function(){var b=c(),d=this.options,e=(a.navigator.userAgent,!!location.protocol.match(/^https?\:$/)),f="AP"===d.AliAppName&&parseFloat(d.AliAppVersion)>=8.2;return d.useAlipayJSBridge===!0&&!e&&f&&a.AlipayJSBridge&&a.AlipayJSBridge.call?a.AlipayJSBridge.call("getMtopToken",function(a){a&&a.token&&(d.token=a.token),b.resolve()},function(){b.resolve()}):b.resolve(),b.promise},n.prototype.__getTokenFromCookie=function(){var a=this.options;return a.CDR&&j(y)?a.token=j(y).split(";")[0]:a.token=a.token||j(z),a.token&&(a.token=a.token.split("_")[0]),o.resolve()},n.prototype.__processToken=function(a){var b=this,c=this.options;this.params;return c.token&&delete c.token,c.WindVaneRequest!==!0?r.then(function(){return b.__getTokenFromAlipay()}).then(function(){return b.__getTokenFromCookie()}).then(a).then(function(){var a=c.retJson,d=a.ret;if(d instanceof Array&&(d=d.join(",")),d.indexOf("TOKEN_EMPTY")>-1||c.CDR===!0&&d.indexOf("ILLEGAL_ACCESS")>-1||d.indexOf("TOKEN_EXOIRED")>-1){if(c.maxRetryTimes=c.maxRetryTimes||5,c.failTimes=c.failTimes||0,c.H5Request&&++c.failTimes<c.maxRetryTimes)return b.__sequence([b.__processToken,b.__processRequestUrl,b.middlewares,b.__processRequest]);c.maxRetryTimes>0&&(k(y,c.pageDomain,"*"),k(z,c.mainDomain,c.subDomain),k(A,c.mainDomain,c.subDomain)),a.retType=v.TOKEN_EXPIRED}}):void a()},n.prototype.__processRequestUrl=function(b){var c=this.params,d=this.options;if(d.hostSetting&&d.hostSetting[a.location.hostname]){var e=d.hostSetting[a.location.hostname];e.prefix&&(d.prefix=e.prefix),e.subDomain&&(d.subDomain=e.subDomain),e.mainDomain&&(d.mainDomain=e.mainDomain)}if(d.H5Request===!0){var f="//"+(d.prefix?d.prefix+".":"")+(d.subDomain?d.subDomain+".":"")+d.mainDomain+"/h5/"+c.api.toLowerCase()+"/"+c.v.toLowerCase()+"/",g=c.appKey||("waptest"===d.subDomain?"4272":"12574478"),i=(new Date).getTime(),j=h(d.token+"&"+i+"&"+g+"&"+c.data),k={jsv:x,appKey:g,t:i,sign:j},l={data:c.data,ua:c.ua};Object.keys(c).forEach(function(a){"undefined"==typeof k[a]&&"undefined"==typeof l[a]&&(k[a]=c[a])}),d.getJSONP?k.type="jsonp":d.getOriginalJSONP?k.type="originaljsonp":(d.getJSON||d.postJSON)&&(k.type="originaljson"),d.querystring=k,d.postdata=l,d.path=f}b()},n.prototype.__processUnitPrefix=function(a){a()};var B=0;n.prototype.__requestJSONP=function(a){function b(a){if(k&&clearTimeout(k),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===a)window[j]=function(){window[j]=void 0;try{delete window[j]}catch(a){}};else{window[j]=void 0;try{delete window[j]}catch(b){}}}var d=c(),g=this.params,h=this.options,i=g.timeout||2e4,j="mtopjsonp"+(g.jsonpIncPrefix||"")+ ++B,k=setTimeout(function(){a("TIMEOUT::接口超时"),b("TIMEOUT")},i);h.querystring.callback=j;var l=document.createElement("script");return l.src=h.path+"?"+f(h.querystring)+"&"+f(h.postdata),l.async=!0,l.onerror=function(){b("ABORT"),a("ABORT::接口异常退出")},window[j]=function(){h.results=Array.prototype.slice.call(arguments),b(),d.resolve()},e(l),d.promise},n.prototype.__requestJSON=function(b){function d(a){l&&clearTimeout(l),"TIMEOUT"===a&&i.abort()}var e=c(),g=this.params,h=this.options,i=new a.XMLHttpRequest,k=g.timeout||2e4,l=setTimeout(function(){b("TIMEOUT::接口超时"),d("TIMEOUT")},k);h.CDR&&j(y)&&(h.querystring.c=decodeURIComponent(j(y))),i.onreadystatechange=function(){if(4==i.readyState){var a,c,f=i.status;if(f>=200&&300>f||304==f){d(),a=i.responseText,c=i.getAllResponseHeaders()||"";try{a=/^\s*$/.test(a)?{}:JSON.parse(a),a.responseHeaders=c,h.results=[a],e.resolve()}catch(g){b("PARSE_JSON_ERROR::解析JSON失败")}}else d("ABORT"),b("ABORT::接口异常退出")}};var m,n,o=h.path+"?"+f(h.querystring);if(h.getJSON?(m="GET",o+="&"+f(h.postdata)):h.postJSON&&(m="POST",n=f(h.postdata)),i.open(m,o,!0),i.withCredentials=!0,i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.headers)for(var p in g.headers)i.setRequestHeader(p,g.headers[p]);return i.send(n),e.promise},n.prototype.__requestWindVane=function(a){function d(a){i.results=[a],g.resolve()}var e,f,g=c(),h=this.params,i=this.options,j=h.data,k=h.api,l=h.v,m=i.postJSON?1:0,n=i.getJSON||i.postJSON?"originaljson":"",o="https"===location.protocol?1:0,p=h.isSec||0,q=h.sessionOption||"AutoLoginOnly",r=h.ecode||0;return f="undefined"!=typeof h.timer?parseInt(h.timer):"undefined"!=typeof h.timeout?parseInt(h.timeout):2e4,e=2*f,h.needLogin===!0&&"undefined"==typeof h.sessionOption&&(q="AutoLoginAndManualLogin"),"undefined"!=typeof h.secType&&"undefined"==typeof h.isSec&&(p=h.secType),b.windvane.call("MtopWVPlugin","send",{api:k,v:l,post:String(m),type:n,isHttps:String(o),ecode:String(r),isSec:String(p),param:JSON.parse(j),timer:f,sessionOption:q,ext_headers:{referer:location.href}},d,d,e),g.promise},n.prototype.__processRequest=function(a,b){var c=this;return r.then(function(){var a=c.options;if(a.H5Request&&(a.getJSONP||a.getOriginalJSONP))return c.__requestJSONP(b);if(a.H5Request&&(a.getJSON||a.postJSON))return c.__requestJSON(b);if(a.WindVaneRequest)return c.__requestWindVane(b);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(a).then(function(){var a=c.options,b=(c.params,a.results[0]),d=b&&b.ret||[];b.ret=d,d instanceof Array&&(d=d.join(","));var e=b.c;a.CDR&&e&&i(y,e,{domain:a.pageDomain,path:"/"}),d.indexOf("SUCCESS")>-1?b.retType=v.SUCCESS:b.retType=v.ERROR,a.retJson=b})},n.prototype.__sequence=function(a){function b(a){if(a instanceof Array)a.forEach(b);else{var g,h=c(),i=c();e.push(function(){return h=c(),g=a.call(d,function(a){return h.resolve(a),i.promise},function(a){return h.reject(a),i.promise}),g&&(g=g["catch"](function(a){h.reject(a)})),h.promise}),f.push(function(a){return i.resolve(a),g})}}var d=this,e=[],f=[];a.forEach(b);for(var g,h=r;g=e.shift();)h=h.then(g);for(;g=f.pop();)h=h.then(g);return h};var C=function(a){a()},D=function(a){a()};n.prototype.request=function(b){var c=this;this.options=d(b||{},t);var e=o.resolve([C,D]).then(function(a){var b=a[0],d=a[1];return c.__sequence([b,c.__processRequestMethod,c.__processRequestType,c.__processToken,c.__processRequestUrl,c.middlewares,c.__processRequest,d])}).then(function(){var a=c.options.retJson;return a.retType!==v.SUCCESS?o.reject(a):c.options.successCallback?void c.options.successCallback(a):o.resolve(a)})["catch"](function(a){var b;return a instanceof Error?(console.error(a.stack),b={ret:[a.message],stack:[a.stack],retJson:v.ERROR}):b="string"==typeof a?{ret:[a],retJson:v.ERROR}:void 0!==a?a:c.options.retJson,c.options.failureCallback?void c.options.failureCallback(b):o.reject(b)});return this.__processRequestType(),c.options.H5Request&&(c.constructor.__firstProcessor||(c.constructor.__firstProcessor=e),C=function(a){c.constructor.__firstProcessor.then(a)["catch"](a)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(b.pageDomain=b.pageDomain||g(a.location.hostname),b.mainDomain!==b.pageDomain&&(b.maxRetryTimes=4,b.CDR=!0)),e},b.mtop=function(a){return new n(a)},b.mtop.request=function(a,b,c){var d={H5Request:a.H5Request,WindVaneRequest:a.WindVaneRequest,LoginRequest:a.LoginRequest,AntiCreep:a.AntiCreep,AntiFlood:a.AntiFlood,successCallback:b,failureCallback:c||b};return new n(a).request(d)},b.mtop.H5Request=function(a,b,c){var d={H5Request:!0,successCallback:b,failureCallback:c||b};return new n(a).request(d)},b.mtop.middlewares=u,b.mtop.config=t,b.mtop.RESPONSE_TYPE=v,b.mtop.CLASS=n}(window,window.lib||(window.lib={})),function(a,b){function c(a){return a.preventDefault(),!1}function d(b,d){var e=this,f=a.dpr||1,g=document.createElement("div"),h=document.documentElement.getBoundingClientRect(),i=Math.max(h.width,window.innerWidth)/f,j=Math.max(h.height,window.innerHeight)/f;g.style.cssText=["-webkit-transform:scale("+f+") translateZ(0)","-ms-transform:scale("+f+") translateZ(0)","transform:scale("+f+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+i+"px","height:"+j+"px","z-index:999999","position:"+(i>800?"fixed":"absolute"),"left:0","top:0px","background:"+(i>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var k=document.createElement("div");k.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),k.innerText=b;var l=document.createElement("a");l.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),l.innerText="关闭";var m=document.createElement("iframe");m.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),i>800&&(k.style.cssText=["width:370px","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:"+(i/2-185)+"px","top:40px","font-size:16px","font-weight:bold","color:#333"].join(";"),m.style.cssText=["position:absolute","top:92px","left:"+(i/2-185)+"px","width:370px","height:480px","border:0","background:#FFF","overflow:hidden"].join(";")),k.appendChild(l),g.appendChild(k),g.appendChild(m),g.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(g),m.src=d,l.addEventListener("click",function(){e.hide();var a=document.createEvent("HTMLEvents");a.initEvent("close",!1,!1),g.dispatchEvent(a)},!1),this.addEventListener=function(){g.addEventListener.apply(g,arguments)},this.removeEventListener=function(){g.removeEventListener.apply(g,arguments)},this.show=function(){document.addEventListener("touchmove",c,!1),g.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",c),window.scrollTo(0,-h.top),g.parentNode&&g.parentNode.removeChild(g)}}function e(a){var c=this,d=this.options,e=this.params;return a().then(function(){var a=d.retJson,f=a.ret,g=navigator.userAgent.toLowerCase(),h=g.indexOf("safari")>-1&&g.indexOf("chrome")<0&&g.indexOf("qqbrowser")<0;if(f instanceof Array&&(f=f.join(",")),(f.indexOf("SESSION_EXPIRED")>-1||f.indexOf("SID_INVALID")>-1||f.indexOf("AUTH_REJECT")>-1||f.indexOf("NEED_LOGIN")>-1)&&(a.retType=k.SESSION_EXPIRED,!d.WindVaneRequest&&(j.LoginRequest===!0||d.LoginRequest===!0||e.needLogin===!0))){if(!b.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(d.safariGoLogin!==!0||!h||"taobao.com"===d.pageDomain)return b.login.goLoginAsync().then(function(a){return c.__sequence([c.__processToken,c.__processRequestUrl,c.__processUnitPrefix,c.middlewares,c.__processRequest])})["catch"](function(a){throw"CANCEL"===a?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")});b.login.goLogin()}})}function f(a){var b=this.options;this.params;return b.H5Request!==!0||j.AntiFlood!==!0&&b.AntiFlood!==!0?void a():a().then(function(){var a=b.retJson,c=a.ret;c instanceof Array&&(c=c.join(",")),c.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&a.data.url&&(b.AntiFloodReferer?location.href=a.data.url.replace(/(http_referer=).+/,"$1"+b.AntiFloodReferer):location.href=a.data.url)})}function g(b){var c=this,e=this.options,f=this.params;return f.forceAntiCreep!==!0&&e.H5Request!==!0||j.AntiCreep!==!0&&e.AntiCreep!==!0?void b():b().then(function(){var b=e.retJson,g=b.ret;return g instanceof Array&&(g=g.join(",")),g.indexOf("RGV587_ERROR::SM")>-1&&b.data.url?new h(function(e,g){function h(){k.removeEventListener("close",h),a.removeEventListener("message",i),g("USER_INPUT_CANCEL::用户取消输入")}function i(b){var d;try{d=JSON.parse(b.data)||{}}catch(j){}if(d&&"child"===d.type){k.removeEventListener("close",h),a.removeEventListener("message",i),k.hide();var l;try{l=JSON.parse(decodeURIComponent(d.content)),"string"==typeof l&&(l=JSON.parse(l));for(var m in l)f[m]=l[m];c.__sequence([c.__processToken,c.__processRequestUrl,c.__processUnitPrefix,c.middlewares,c.__processRequest]).then(e)}catch(j){g("USER_INPUT_FAILURE::用户输入失败")}}}var j=b.data.url,k=new d("",j);k.addEventListener("close",h,!1),a.addEventListener("message",i,!1),k.show()}):void 0})}if(!b||!b.mtop||b.mtop.ERROR)throw new Error("Mtop 初始化失败！请参考Mtop文档http://gitlab.alibaba-inc.com/mtb/lib-mtop");var h=a.Promise,i=b.mtop.CLASS,j=b.mtop.config,k=b.mtop.RESPONSE_TYPE;b.mtop.middlewares.push(e),b.mtop.loginRequest=function(a,b,c){var d={LoginRequest:!0,H5Request:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.antiFloodRequest=function(a,b,c){var d={AntiFlood:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.middlewares.push(f),b.mtop.antiCreepRequest=function(a,b,c){var d={AntiCreep:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.middlewares.push(g)}(window,window.lib||(window.lib={}));!function(a,b){function c(a){var b={};Object.defineProperty(this,"params",{set:function(a){if("object"==typeof a){for(var c in b)delete b[c];for(var c in a)b[c]=a[c]}},get:function(){return b},enumerable:!0}),Object.defineProperty(this,"search",{set:function(a){if("string"==typeof a){0===a.indexOf("?")&&(a=a.substr(1));var c=a.split("&");for(var d in b)delete b[d];for(var e=0;e<c.length;e++){var f=c[e].split("=");if(f[0])try{b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]||"")}catch(g){b[f[0]]=f[1]||""}}}},get:function(){var a=[];for(var c in b)if(b[c])try{a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}catch(d){a.push(c+"="+b[c])}else try{a.push(encodeURIComponent(c))}catch(d){a.push(c)}return a.length?"?"+a.join("&"):""},enumerable:!0});var c;Object.defineProperty(this,"hash",{set:function(a){a&&a.indexOf("#")<0&&(a="#"+a),c=a||""},get:function(){return c},enumerable:!0}),this.set=function(a){a=a||"";var b;if(!(b=a.match(new RegExp("^([a-z0-9-]+:)?[/]{2}(?:([^@/:?]+)(?::([^@/:]+))?@)?([^:/?#]+)(?:[:]([0-9]+))?([/][^?#;]*)?(?:[?]([^?#]*))?(#[^#]*)?$","i"))))throw new Error("Wrong uri scheme.");this.protocol=b[1]||location.protocol,this.username=b[2]||"",this.password=b[3]||"",this.hostname=this.host=b[4],this.port=b[5]||"",this.pathname=b[6]||"/",this.search=b[7]||"",this.hash=b[8]||"",this.origin=this.protocol+"//"+this.hostname},this.toString=function(){var a=this.protocol+"//";return this.username&&(a+=this.username,this.password&&(a+=":"+this.password),a+="@"),a+=this.host,this.port&&"80"!==this.port&&(a+=":"+this.port),this.pathname&&(a+=this.pathname),this.search&&(a+=this.search),this.hash&&(a+=this.hash),a},a&&this.set(a.toString())}b.httpurl=function(a){return new c(a)}}(window,window.lib||(window.lib={}));!function(a,b){function c(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),d<e)return-1;if(d>e)return 1}return 0}var d=a.Promise,e=a.document,f=a.navigator.userAgent,g=/Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(f)||/Windows\sNT\s[\d\.]+/i.test(f),h=g&&a.WindVane_Win_Private&&a.WindVane_Win_Private.call,i=/iPhone|iPad|iPod/i.test(f),j=/Android/i.test(f),k=f.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),l=Object.prototype.hasOwnProperty,m=b.windvane=a.WindVane||(a.WindVane={}),n=(a.WindVane_Native,Math.floor(65536*Math.random())),o=1,p=[],q=3,r="hybrid",s="wv_hybrid",t="iframe_",u="param_",v="chunk_",w=6e5,x=6e5,y=6e4;k=k?(k[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var z={isAvailable:1===c(k,"0"),call:function(a,b,c,e,f,g){var h,i;"number"==typeof arguments[arguments.length-1]&&(g=arguments[arguments.length-1]),"function"!=typeof e&&(e=null),"function"!=typeof f&&(f=null),d&&(i={},i.promise=new d(function(a,b){i.resolve=a,i.reject=b})),h=A.getSid();var j={success:e,failure:f,deferred:i};if(g>0&&(j.timeout=setTimeout(function(){z.onFailure(h,{ret:"HY_TIMEOUT"})},g)),A.registerCall(h,j),A.registerGC(h,g),z.isAvailable?A.callMethod(a,b,c,h):z.onFailure(h,{ret:"HY_NOT_IN_WINDVANE"}),i)return i.promise},fireEvent:function(a,b,c){var d=e.createEvent("HTMLEvents");d.initEvent(a,!1,!0),d.param=A.parseData(b||A.getData(c)),e.dispatchEvent(d)},getParam:function(a){return A.getParam(a)},setData:function(a,b){A.setData(a,b)},onSuccess:function(a,b){A.onComplete(a,b,"success")},onFailure:function(a,b){A.onComplete(a,b,"failure")}},A={params:{},chunks:{},calls:{},getSid:function(){return(n+o++)%65536+""},buildParam:function(a){return a&&"object"==typeof a?JSON.stringify(a):a||""},getParam:function(a){return this.params[u+a]||""},setParam:function(a,b){this.params[u+a]=b},parseData:function(a){var b;if(a&&"string"==typeof a)try{b=JSON.parse(a)}catch(a){b={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else b=a||{};return b},setData:function(){this.chunks[v+sid]=this.chunks[v+sid]||[],this.chunks[v+sid].push(chunk)},getData:function(a){return this.chunks[v+a]?this.chunks[v+a].join(""):""},registerCall:function(a,b){this.calls[a]=b},unregisterCall:function(a){var b={};return this.calls[a]&&(b=this.calls[a],delete this.calls[a]),b},useIframe:function(a,b){var c=t+a,d=p.pop();d||(d=e.createElement("iframe"),d.setAttribute("frameborder","0"),d.style.cssText="width:0;height:0;border:0;display:none;"),d.setAttribute("id",c),d.setAttribute("src",b),d.parentNode||setTimeout(function(){e.body.appendChild(d)},5)},retrieveIframe:function(a){var b=t+a,c=e.querySelector("#"+b);p.length>=q?e.body.removeChild(c):p.indexOf(c)<0&&p.push(c)},callMethod:function(b,c,d,e){if(d=A.buildParam(d),g)h?a.WindVane_Win_Private.call(b,c,e,d):this.onComplete(e,{ret:"HY_NO_HANDLER_ON_WP"},"failure");else{var f=r+"://"+b+":"+e+"/"+c+"?"+d;if(i)this.setParam(e,d),this.useIframe(e,f);else if(j){var k=s+":";window.prompt(f,k)}else this.onComplete(e,{ret:"HY_NOT_SUPPORT_DEVICE"},"failure")}},registerGC:function(a,b){var c=this,d=Math.max(b||0,w),e=Math.max(b||0,y),f=Math.max(b||0,x);setTimeout(function(){c.unregisterCall(a)},d),i?setTimeout(function(){c.params[u+a]&&delete c.params[u+a]},e):j&&setTimeout(function(){c.chunks[v+a]&&delete c.chunks[v+a]},f)},onComplete:function(a,b,c){var d=this.unregisterCall(a),e=d.success,f=d.failure,g=d.deferred,h=d.timeout;h&&clearTimeout(h),b=b?b:this.getData(a),b=this.parseData(b);var k=b.ret;"string"==typeof k&&(b=b.value||b,b.ret||(b.ret=[k])),"success"===c?(e&&e(b),g&&g.resolve(b)):"failure"===c&&(f&&f(b),g&&g.reject(b)),i?(this.retrieveIframe(a),this.params[u+a]&&delete this.params[u+a]):j&&this.chunks[v+a]&&delete this.chunks[v+a]}};for(var B in z)l.call(m,B)||(m[B]=z[B])}(window,window.lib||(window.lib={}));!function(a,b,c){function d(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(v.cookie);return b?b[1]:c}function e(a){return a.preventDefault(),!1}function f(b,c){var d=this,f=a.dpr||1,g=document.createElement("div"),h=document.documentElement.getBoundingClientRect(),i=Math.max(h.width,window.innerWidth)/f,j=Math.max(h.height,window.innerHeight)/f;g.style.cssText=["-webkit-transform:scale("+f+") translateZ(0)","-ms-transform:scale("+f+") translateZ(0)","transform:scale("+f+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+i+"px","height:"+j+"px","z-index:999999","position:absolute","left:0","top:0px","background:#FFF","display:none"].join(";");var k=document.createElement("div");k.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),k.innerText=b;var l=document.createElement("a");l.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),l.innerText="关闭";var m=document.createElement("iframe");m.style.cssText=["width:100%","height:"+window.innerHeight/f+"px","border:0","overflow:hidden"].join(";"),k.appendChild(l),g.appendChild(k),g.appendChild(m),v.body.appendChild(g),m.src=c,l.addEventListener("click",function(){d.hide();var a=v.createEvent("HTMLEvents");a.initEvent("close",!1,!1),g.dispatchEvent(a)},!1),this.addEventListener=function(){g.addEventListener.apply(g,arguments)},this.removeEventListener=function(){g.removeEventListener.apply(g,arguments)},this.show=function(){document.addEventListener("touchmove",e,!1),g.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",e),window.scrollTo(0,-h.top),v.body.removeChild(g)}}function g(a){if(!a||"function"!=typeof a||!b.mtop){var d=this.getUserNick();return!!d}b.mtop.request({api:"mtop.user.getUserSimple",v:"1.0",data:{isSec:0},H5Request:!0},function(d){d.retType===b.mtop.RESPONSE_TYPE.SUCCESS?a(!0,d):d.retType===b.mtop.RESPONSE_TYPE.SESSION_EXPIRED?a(!1,d):a(c,d)})}function h(a){var b;return u&&(b={},b.promise=new u(function(a,c){b.resolve=a,b.reject=c})),this.isLogin(function(c,d){a&&a(c,d),c===!0?b&&b.resolve(d):b&&b.reject(d)}),b?b.promise:void 0}function i(a){if(!a||"function"!=typeof a){var b="",e=d("_w_tb_nick"),f=d("_nk_")||d("snk"),g=d("sn");return e&&e.length>0&&"null"!=e?b=decodeURIComponent(e):f&&f.length>0&&"null"!=f?b=unescape(unescape(f).replace(/\\u/g,"%u")):g&&g.length>0&&"null"!=g&&(b=decodeURIComponent(g)),b=b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}this.isLogin(function(b,d){a(b===!0&&d&&d.data&&d.data.nick?d.data.nick:b===!1?"":c)})}function j(a){var b;return u&&(b={},b.promise=new u(function(a,c){b.resolve=a,b.reject=c})),this.getUserNick(function(c){a&&a(c),c?b&&b.resolve(c):b&&b.reject()}),b?b.promise:void 0}function k(a,c){var d="//"+G+"."+H.subDomain+"."+E+"/"+H[(a||"login")+"Name"];if(c){var e=[];for(var f in c)e.push(f+"="+encodeURIComponent(c[f]));d+="?"+e.join("&")}var g=b.login.config.loginUrlParams;if(g){var h=[];for(var i in g)h.push(i+"="+encodeURIComponent(g[i]));d+=/\?/.test(d)?"&"+h.join("&"):"?"+e.join("&")}return d}function l(a,b){b?location.replace(a):location.href=a}function m(b,c,d){function e(b){j.removeEventListener("close",e),a.removeEventListener("message",g),d("CANCEL")}function g(b){var c=b.data||{};c&&"child"===c.type&&c.content.indexOf("SUCCESS")>-1?(j.removeEventListener("close",e),a.removeEventListener("message",g),j.hide(),d("SUCCESS")):d("FAILURE")}var h=location.protocol+"//h5."+H.subDomain+".taobao.com/"+("waptest"===H.subDomain?"src":"other")+"/"+b+"end.html?origin="+encodeURIComponent(location.protocol+"//"+location.hostname),i=k(b,{ttid:"h5@iframe",redirectURL:h}),j=new f(c.title||"您需要登录才能继续访问",i);j.addEventListener("close",e,!1),a.addEventListener("message",g,!1),j.show()}function n(b,c,d){var e=k(b,{wvLoginCallback:"wvLoginCallback"});a.wvLoginCallback=function(b){delete a.wvLoginCallback,d(b.indexOf(":SUCCESS")>-1?"SUCCESS":b.indexOf(":CANCEL")>-1?"CANCEL":"FAILURE")},l(e)}function o(a,b,c){if("function"==typeof b?(c=b,b=null):"string"==typeof b&&(b={redirectUrl:b}),b=b||{},c&&A)n(a,b,c);else if(c&&!z&&"login"===a)m(a,b,c);else{var d=k(a,{redirectURL:b.redirectUrl||location.href});l(d,b.replace)}}function p(a,b,c){var d;return u&&(d={},d.promise=new u(function(a,b){d.resolve=a,d.reject=b})),o(a,b,function(a){c&&c(a),"SUCCESS"===a?d&&d.resolve(a):d&&d.reject(a)}),d?d.promise:void 0}function q(a){o("login",a)}function r(a){return p("login",a)}function s(a){o("logout",a)}function t(a){return p("logout",a)}var u=a.Promise,v=a.document,w=a.navigator.userAgent,x=location.hostname,y=(a.location.search,w.match(/WindVane[\/\s]([\d\.\_]+)/)),z=w.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i),A=!!(z&&"TB"===z[1]&&y&&parseFloat(y[1])>5.2),B=["taobao.net","taobao.com"],C=new RegExp("([^.]*?)\\.?((?:"+B.join(")|(?:").replace(/\./g,"\\.")+"))","i"),D=x.match(C)||[],E=function(){var a=D[2]||"taobao.com";return a.match(/\.?taobao\.net$/)?"taobao.net":"taobao.com"}(),F=function(){var a=E,b=D[1]||"m";return"taobao.net"===a&&(b="waptest"),"m"!=b&&"wapa"!=b&&"waptest"!=b&&(b="m"),b}(),G="login";b.login=b.login||{};var H={loginName:"login.htm",logoutName:"logout.htm",subDomain:F};b.login.config=H,b.login.isLogin=g,b.login.isLoginAsync=h,b.login.getUserNick=i,b.login.getUserNickAsync=j,b.login.generateUrl=k,b.login.goLogin=q,b.login.goLoginAsync=r,b.login.goLogout=s,b.login.goLogoutAsync=t}(window,window.lib||(window.lib={}));this.Tracker=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,t,r){},t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){function r(e){return"object"==typeof e&&null!==e}var n=function(e){return"[object Number]"===Object.prototype.toString.call(e)};t.isNumber=n,t.isNaN=function(e){return n(e)&&e!==+e},t.isArray=function(e){return Array.isArray?Array.isArray(e):-1!==Object.prototype.toString.call(e).toUpperCase().indexOf("ARRAY")},t.noop=function(e){return e||""},t.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},t.shallowMerge=function(e,t,r){for(var n in t)t.hasOwnProperty(n)&&(r||e[n]===undefined)&&(e[n]=t[n])},t.getSpm=function(){var e="",r="",n=window.goldlog||{},i=n.spmAb||n.spm_ab;return i&&t.isArray(i)&&(e=i[0],i[1]&&(r=i[1])),{a:e,b:r}},t.unifyErrorMsg=function(e){return/^script error\.?$/i.test(e)?"Script error":e},t.getScreenSize=function(){return window.screen.width+"x"+window.screen.height},t.generateIdentifier=function(e){return[e.type,e.uid,e.page,e.msg||"",e.ajaxurl||""].join("_")};var i={};t.addEvent=function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):(i["on"+t]=function(){return r.call(e,window.event)},e.attachEvent("on"+t,i["on"+t]))},t.removeEvent=function(e,t,r,n){e.removeEventListener?e.removeEventListener(t,r,n||!1):e.detachEvent("on"+t,i["on"+t]||noop)},t.isError=function(e){var t={}.toString.call(e);return r(e)&&"[object Error]"===t||"[object Exception]"===t||e instanceof Error},t.getXPath=function o(e,t){var r=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"",i=e.tagName.toLowerCase();return e.parentNode&&e.parentNode.tagName&&t-1!=0?o(e.parentNode,t-1)+" > "+i.toLowerCase()+r+n:i+r+n}},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);e=e||{},!0===e.hotPatch&&this._hotPatch(),!1!==e.global&&"object"==typeof v.__trackerOptions&&o(e,v.__trackerOptions),this.global=null==e.global||!!e.global,this.debug=e.debug||b&&b.search.indexOf("clueTrackerDebug=true")>-1,this.debug&&this._warn("已开启 debug 模式，请勿在生产环境使用"),this.pid=e.pid,this.sampleRate=e.sampleRate||1,this.uidResolver=e.uidResolver||s,this.userOptions=e,this.requiredFields=e.requiredFields||[],this.releaseResolver=e.releaseResolver||s,this.uaParser=e.uaParser||s,this.beforeLog=e.beforeLog||null,this.msgWhitelist=e.msgWhitelist||e.msgWhiteList||S,this.urlWhitelist=e.urlWhitelist||e.urlWhiteList||k,this.oncePerSession=e.oncePerSession===undefined||e.oncePerSession,this.consoleDisplay=e.consoleDisplay||!1,this.ignoreScriptError=e.ignoreScriptError||!1,this.resourceError=e.resourceError===undefined||e.resourceError,this.resourceErrorSampleRate=e.resourceErrorSampleRate||1,this.ignoredQueries=e.ignoredQueries||[],this.global&&(v.__trackerOptions=e),this._inited=!1,this._tracked=[],this._logWaitingQueue=[],this._plugins=e.plugins||[],this._pos="0,0",this._trackMousePos(),this.isWeex=e.isWeex||!1,this.weexFetch=e.weexFetch,this.noDOM=this.isWeex,this.fetchProtocol=e.protocol}var i=r(0),o=i.shallowMerge,s=i.noop,a=i.generateIdentifier,c=i.getScreenSize,l=i.addEvent,h=i.removeEvent,u=i.getSpm,p=i.isError,f=i.getXPath,g=r(2),d=r(3),_=i.unifyErrorMsg,m=!1;try{"[object process]"===global.process.toString()&&(m=!0,global.process.versions&&global.process.versions.electron&&"renderer"===global.process.type&&(m=!1))}catch(j){}var v={};m||(v="undefined"!=typeof window?window:"undefined"!=typeof self?self:{});var w=v.document,y=v.navigator,b=v.location,E=!1,R=v.Tracker,O={JS_ERROR:1},S=null,k=null,P=+new Date,x=v.onerror;n.noConflict=function(){return v.Tracker===n&&(v.Tracker=R),n},n.prototype={VERSION:"4.0.6",log:function(e,t){"object"==typeof e?t=e:"string"==typeof e&&(t=t||{},o(t,{code:1,msg:e})),this._log(t)},captureMessage:function(e,t){return this.log(e,t)},logError:function(e,t){if(!p(e))return this.log(e,t);if(t=t||{},t.c1||t.c2||t.c3)return void this._warn("使用 tracker.logError() 时不可再传入 c1,c2,c3 字段，请求未发送");var r={},n=d(e);r.msg=e.toString(),r.c1=n[0],r.c2=n[1],r.c3=n[2],o(r,t),this._log(r)},captureException:function(e,t){return this.logError(e,t)},logReq:function(){this._warn("logReq() 方法已经废弃，若有需要，请使用自定义打点方式( `tracker.log()` )监控接口错误。")},logPerf:function(){this._warn("logPerf() 方法已经废弃，若有需要，请使用自定义打点方式( `tracker.log()` )监控接口错误。")},config:function(e,t){return"string"==typeof e?(t=t||{},t.pid=e):t=e,o(this,t,!0),o(this.userOptions,t,!0),"object"==typeof v.__trackerOptions&&o(v.__trackerOptions,t,!0),this._checkRequiredFields()&&this._popWaitingQueue(),this},onGlobalError:function(){if(!w)return this._warn("当前为非 web 环境，不支持报错监听与插件使用"),this;var e=this;if(this.pid&&!this._inited){if(v.onerror=function(t,r,n,i,o){e._handleError(t,r,n,i,o)},this.unhandledrejectionHandler=function(t){t.reason&&t.reason.message&&e._handleError(t.reason.message,null,null,null,t.reason)},l(v,"unhandledrejection",this.unhandledrejectionHandler),this.resourceError&&(this.resourceErrorHandler=function(t){if(!(!t.target.tagName||t.message||t.filename||t.lineno||t.colno)){var r=t.target.src||t.target.href,n=t.target.tagName.toLowerCase();e._log({code:4,sampleRate:e.resourceErrorSampleRate,msg:r+" 获取失败",c1:n,c2:f(t.target,5)})}},l(v,"error",this.resourceErrorHandler,!0)),this._plugins.length)for(;this._plugins.length>0;){var t=this._plugins.pop(),r=t[0],n=t[1];r.apply(this,[this].concat(n))}this._inited=!0,this._warn("onGlobalError 已开启，plugin 已加载")}return this},install:function(){return this.onGlobalError()},offGlobalError:function(){return w?(v.onerror=x,h(v,"unhandledrejection",this.unhandledrejectionHandler),this.resourceError&&h(v,"error",this.resourceErrorHandler,!0),this._inited=!1,this._plugins=[],this._tracked=[],this._warn("onGlobalError 已关闭"),this):(this._warn("当前为非 web 环境，不支持监听事件移除与状态重置"),this)},uninstall:function(){return this.offGlobalError()},addPlugin:function(e){if(!w)return this._warn("当前为非 web 环境，不支持插件使用"),this;var t=[].slice.call(arguments,1);return"function"==typeof e&&this._inited?e.apply(this,[this].concat(t)):this._plugins.push([e,t]),this},_handleError:function(e,t,r,n,i){if(x)try{x.call(this,e,t,r,n,i)}catch(a){}t=t||"-",r=r||"-",n=n||"-",e=_(e);var o={msg:e,code:O.JS_ERROR};if(!this.ignoreScriptError||"Script error"!==e){if(null!=i&&(1===this.sampleRate||Math.random()<.1)){var s=d(i);o.c1=s[0],o.c2=s[1],o.c3=s[2]}this._log(o)}},_handleMouseDown:function(e){var t=w&&w.documentElement,r=Math.round(e.pageY||e.clientY+w.body.scrollTop+t.scrollTop),n=Math.round(e.pageX||e.clientX+w.body.scrollLeft+t.scrollLeft);n-=Math.max(t.clientWidth,t.offsetWidth,t.scrollWidth)/2,this._pos=String(n)+","+String(r)},_trackMousePos:function(){var e=this;w&&w.documentElement&&l(w,"mousedown",function(t){e._handleMouseDown(t)})},getFetchProtocol:function(){return"http"===this.fetchProtocol?"http://gm.mmstat.com/":"https"===this.fetchProtocol?"https://gm.mmstat.com/":v&&w&&!this.noDOM&&"file:"===v.location.protocol?"http://gm.mmstat.com/":"//gm.mmstat.com/"},_postData:function(e){var t=!!(v.navigator&&v.navigator.sendBeacon&&v.Blob),r=this.getFetchProtocol()+(e.base||"fsp.1.1");this._warn("当前打点参数",e);var n=g.stringify(e,["code","base","sampleRate","oncePerSession"],t);if(this.isWeex&&this.weexFetch&&this.weexFetch.fetch)try{this.weexFetch.fetch({method:"GET",type:"json",url:r+"?"+n}),this._warn("weex 打点请求已发出",r+"?"+n)}catch(j){this._warn("weex fetch 发送打点请求失败")}else if(t)try{v.navigator.sendBeacon(r,JSON.stringify({gmkey:"OTHER",gokey:n,logtype:"2"})),this._warn("sendBeacon 打点请求已发出",{gmkey:"OTHER",gokey:n,logtype:"2"})}catch(j){if(n=g.stringify(e,["code","base","sampleRate","oncePerSession"],!1),v&&w&&!this.noDOM){var i=new Image;i.src=r+"?"+n,this._warn("打点请求已发出",i.src)}else this._warn("当前非 web 环境，发送异常信息失败")}else if(v&&w&&!this.noDOM){var i=new Image;i.src=r+"?"+n,this._warn("打点请求已发出",i.src)}else this._warn("当前非 web 环境，发送异常信息失败")},_log:function(e){if(e=e||{},e.type||e.code||(e.type=1),!e.type&&e.code&&(e.type=e.code),e.type===O.JS_ERROR&&Math.random()>(e.sampleRate||this.sampleRate))return void this._warn("当前已设置采样率"+(e.sampleRate||this.sampleRate)+"，未被采集");if(null!=e.sampleRate&&Math.random()>e.sampleRate)return void this._warn("当前已设置采样率"+(e.sampleRate||this.sampleRate)+"，未被采集");if(e=this._enhanceOpitons(e),!e.pid)return void this._warn("未配置 pid，请求未发送");for(var t=a(e),r=!1,n=0;n<this._tracked.length;n++)if(this._tracked[n]===t){r=!0;break}if((null==e.oncePerSession?this.oncePerSession:e.oncePerSession)&&r)return void this._warn("当前由于 OncePerSession 策略，未被采集");if(this.msgWhitelist&&null!==this.msgWhitelist.exec(e.msg))return void this._warn("当前由于 msgWhitelist 过滤，未被采集");if(this.urlWhitelist&&null!==this.urlWhitelist.exec(e.page))return void this._warn("当前由于 urlWhitelist 过滤，未被采集");if("function"==typeof this.beforeLog){var i;try{i=this.beforeLog(e)}catch(j){}if(!1===i)return void this._warn("当前由于 beforeLog 返回 false，未被采集");"object"==typeof i&&(e=i)}if(this._tracked.push(t),this.consoleDisplay&&this._warn(e.msg),!this._checkRequiredFields())return this._pushWaitingQueue(e),void this._warn("当前由于 requiredFields 未设置完成，打点请求被暂时缓存");this._postData(e)},_checkRequiredFields:function(){for(var e=0;e<this.requiredFields.length;e++){var t=this.requiredFields[e];if(this.userOptions[t]===undefined)return!1}return!0},_popWaitingQueue:function(){var e=this;if(this._logWaitingQueue&&this._logWaitingQueue.length)for(var t=0;t<this._logWaitingQueue.length;t++){var r=this._logWaitingQueue[t];o(r,e._enhanceOpitonsByUser(e.userOptions),!0),e._postData(r)}this._logWaitingQueue=[]},_pushWaitingQueue:function(e){this._logWaitingQueue.push(e)},_enhanceOpitonsByUser:function(e){return e.uid||(e.uid=this.uidResolver()),e.pid||(e.pid=this.pid),e.rel||(e.rel=this.releaseResolver()),e.ua||(e.ua=this.uaParser(y?y.userAgent:"")),e},_enhanceOpitonsCommon:function(e){return e=this._enhanceOpitonsByUser(e),e.delay=parseFloat(((+new Date-P)/1e3).toFixed(2)),e.tracker_ver=this.VERSION,e.patch_ver=this.PATCH_VERSION||"-",e},_enhanceOpitonsDOM:function(e){if(!w)return e;e.page||(e.page=v.location.href.split("?")[0]),e.query||(e.query=g.stringify(g.parse(window.location.search),e.ignoredQueries)),e.hash||(e.hash=window.location.hash),e.title||(e.title=w.title),e.spm_a||(e.spm_a=u().a),e.spm_b||(e.spm_b=u().b),e.scr||(e.scr=c()),e.raw_ua=y?y.userAgent:"";var t=(w.referrer||"").split("?"),r=t[0],n=2===t.length?g.stringify(g.parse(t[1]),e.ignoredQueries):"";return 2===t.length&&n.length>0?e.referrer=r+"?"+n:e.referrer=r,e.last_pos=this._pos,e},_enhanceOpitons:function(e){return e=this._enhanceOpitonsCommon(e),e=this._enhanceOpitonsDOM(e)},_warn:function(){if("object"==typeof v&&v.console&&"function"==typeof v.console.warn&&this.debug){var e=Array.prototype.slice.call(arguments);v.console.warn.apply(null,["[Tracker Debug] "+e[0]].concat(e.slice(1)))}},_hotPatch:function(){if(v&&w&&!this.noDOM){if(E&&v.__trackerPatch)return;E=!0;var e=Math.random();if(v.localStorage&&v.localStorage.getItem){var t=v.localStorage.getItem("__tracker_patch__"),r=+new Date;if(t&&r-parseInt(t,10)<432e5)e=t;else{e=r;try{v.localStorage.setItem("__tracker_patch__",r)}catch(j){}}}var n=w.createElement("script");n.src="//g.alicdn.com/fsp/tracker-patch/index.js?"+e,n.async=!0,n.crossOrigin=!0,n.id="tracker-patch",(w.head||w.body).appendChild(n);var i=this;v.__trackerPatch=function(){return i}}}},e.exports=n},function(e,t){function r(e){return"[object Array]"==={}.toString.call(e)}t.parse=function(e){var t={};if("string"!=typeof e)return t;if(e=(e||"").split("?")[1]||"",!(e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/^(\?|#|&)/,"")))return t;for(var n=e.split("&"),i=0;i<n.length;++i){var o=n[i],s=o.replace(/\+/g," ").split("="),a=s.shift(),c=s.length>0?s.join("="):undefined;a=decodeURIComponent(a),c=c===undefined?null:decodeURIComponent(c),t[a]===undefined?t[a]=c:r(t[a])?t[a].push(c):t[a]=[t[a],c]}return t};t.stringify=function(e,t,r){if(!e)return"";t=t||[];var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);var o=[];n=n.sort();for(var s=0;s<n.length;++s){i=n[s];var a=e[i];if(null!=a){for(var c=!1,l=0;l<t.length;++l)if(t[l]===i){c=!0;break}c||o.push(encodeURIComponent(i)+"="+encodeURIComponent(r?encodeURIComponent(a):String(a).slice(0,512)))}}return o.join("&")}},function(e,t){function r(e){for(var t=((e||{}).stack||"").split("\n"),r=["","",""],a={},c=0;c<t.length;c++){var l=i,h=(t[c]||"").match(l);if(null===h&&(l=o,h=(t[c]||"").match(l)),null===h&&(l=s,h=(t[c]||"").match(l)),null!==h){var u=h[1],p=a[u];p===undefined&&(a[u]="#"+c+"#",p=a[u]),t[c]=t[c].replace(u,p)}}if(t.length>0){t.shift();var f="";for(c=0;f.length+(t[c]||"").length<n&&c<t.length;)f+=t[c]+"\n",c++;r[1]=f;for(var g="";g.length+(t[c]||"").length<n&&c<t.length;)g+=t[c]+"\n",c++;r[2]=g}var d="";for(u in a)a.hasOwnProperty(u)&&(d+=u+"@"+a[u]+";");return d=d.replace(/;$/,""),r[0]=d,r}var n=4096,i=/^\s*at .*? ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::\d+)?(?::\d+)?\)?\s*$/i,o=/^\s*.*?(?:\(.*?\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::\d+)?(?::\d+)?\s*$/i,s=/^\s*at (?:(?:\[object object\])?.+ )?\(?((?:file|ms-appx|https?|blob):.*?):\d+(?::\d+)?\)?\s*$/i;"object"==typeof process&&"test"===process.env.NODE_ENV&&(i=/([^\()]+\.spec\.js)/i),e.exports=r}]);this.interfaceTrackerPlugin=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,t,r){},t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){function r(e){return"object"==typeof e&&null!==e}var n=function(e){return"[object Number]"===Object.prototype.toString.call(e)};t.isNumber=n,t.isNaN=function(e){return n(e)&&e!==+e},t.isArray=function(e){return Array.isArray?Array.isArray(e):-1!==Object.prototype.toString.call(e).toUpperCase().indexOf("ARRAY")},t.noop=function(e){return e||""},t.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},t.shallowMerge=function(e,t,r){for(var n in t)t.hasOwnProperty(n)&&(r||e[n]===undefined)&&(e[n]=t[n])},t.getSpm=function(){var e="",r="",n=window.goldlog||{},o=n.spmAb||n.spm_ab;return o&&t.isArray(o)&&(e=o[0],o[1]&&(r=o[1])),{a:e,b:r}},t.unifyErrorMsg=function(e){return/^script error\.?$/i.test(e)?"Script error":e},t.getScreenSize=function(){return window.screen.width+"x"+window.screen.height},t.generateIdentifier=function(e){return[e.type,e.uid,e.page,e.msg||"",e.ajaxurl||""].join("_")};var o={};t.addEvent=function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):(o["on"+t]=function(){return r.call(e,window.event)},e.attachEvent("on"+t,o["on"+t]))},t.removeEvent=function(e,t,r,n){e.removeEventListener?e.removeEventListener(t,r,n||!1):e.detachEvent("on"+t,o["on"+t]||noop)},t.isError=function(e){var t={}.toString.call(e);return r(e)&&"[object Error]"===t||"[object Exception]"===t||e instanceof Error},t.getXPath=function a(e,t){var r=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"",o=e.tagName.toLowerCase();return e.parentNode&&e.parentNode.tagName&&t-1!=0?a(e.parentNode,t-1)+" > "+o.toLowerCase()+r+n:o+r+n}},,,,function(e,t,r){var n=r(0);e.exports=function(e,t){var r={sampleRate:1,evaluate:null,fullSample:!1},o=n.extend(r,t);if("XMLHttpRequest"in window){var a=window.XMLHttpRequest.prototype,i=a.open;a.open=function(e,t){this.__tracker__={method:e,url:t||"",status_code:null};for(var r=new Array(arguments.length),n=0;n<r.length;++n)r[n]=arguments[n];i.apply(this,r)};var c=a.send;a.send=function(t){function r(){if(n.__tracker__&&4===n.readyState)try{var r="GET"===n.__tracker__.method.toUpperCase(),a=n.__tracker__.url;if(0===n.status)return;var i=a.split("?")[0],c=a.split("?")[1]||"",s=r?c:t?JSON.stringify(t):c,u=String(n.response);u.length>2048&&(u="[too large]");var l={ajaxurl:i,params:s,c1:n.__tracker__.method,c2:n.status,c3:u,code:2,sampleRate:o.sampleRate,oncePerSession:!0},p=!1;if("function"==typeof o.evaluate){if("[object Blob]"==={}.toString.call(n.response))return;var f;try{f=o.evaluate(n.response)}catch(d){}"object"==typeof f&&(l.c4=f.errorCode||f.errCode||"",l.c5=f.traceId||"",l.msg=f.msg||"",p=!0)}(200!==n.status||p||o.fullSample)&&e.log(l)}catch(h){e.logError(h,{pid:"fsp",code:12,c4:e.pid,c5:n.__tracker__.url})}}var n=this;if("onreadystatechange"in n&&"function"==typeof n.onreadystatechange){var a=n.onreadystatechange;n.onreadystatechange=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];r.apply(this,e),a.apply(this,e)}}else n.onreadystatechange=r;for(var i=new Array(arguments.length),s=0;s<i.length;++s)i[s]=arguments[s];return c.apply(this,arguments)}}if("fetch"in window){var s=window.fetch;window.fetch=function(){for(var t=new Array(arguments.length),r=0;r<t.length;++r)t[r]=arguments[r];var n="GET";return t[1]&&t[1].method&&(n=t[1].method.toUpperCase()),s.apply(this,t).then(function(r){return new Promise(function(a,i){try{var c="GET"===n,s=t[0],u=s.split("?")[0],l=s.split("?")[1]||"",p=c?l:t[1]?JSON.stringify(t[1].body):l,f={ajaxurl:u,params:p,c1:n,c2:r.status,code:2,sampleRate:o.sampleRate,oncePerSession:!0};r.clone().text().then(function(t){var n=t;try{n=o.evaluate(t)}catch(i){}var a="object"==typeof n;a&&(f.c4=n.errorCode||n.errCode||"",f.c5=n.traceId||"",f.msg=n.msg||""),(a||!r.ok||o.fullSample)&&(f.c3=(t||"").length>2048?"[too large]":t,e.log(f))}).then(function(){a(r)},function(n){e.logError(n,{pid:"fsp",code:12,c4:e.pid,c5:t[0]}),a(r)})}catch(d){e.logError(d,{pid:"fsp",code:12,c4:e.pid,c5:t[0]}),a(r)}})})}}}}]);this.performanceTrackerPlugin=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,t,r){},t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}({0:function(e,t){function r(e){return"object"==typeof e&&null!==e}var n=function(e){return"[object Number]"===Object.prototype.toString.call(e)};t.isNumber=n,t.isNaN=function(e){return n(e)&&e!==+e},t.isArray=function(e){return Array.isArray?Array.isArray(e):-1!==Object.prototype.toString.call(e).toUpperCase().indexOf("ARRAY")},t.noop=function(e){return e||""},t.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},t.shallowMerge=function(e,t,r){for(var n in t)t.hasOwnProperty(n)&&(r||e[n]===undefined)&&(e[n]=t[n])},t.getSpm=function(){var e="",r="",n=window.goldlog||{},o=n.spmAb||n.spm_ab;return o&&t.isArray(o)&&(e=o[0],o[1]&&(r=o[1])),{a:e,b:r}},t.unifyErrorMsg=function(e){return/^script error\.?$/i.test(e)?"Script error":e},t.getScreenSize=function(){return window.screen.width+"x"+window.screen.height},t.generateIdentifier=function(e){return[e.type,e.uid,e.page,e.msg||"",e.ajaxurl||""].join("_")};var o={};t.addEvent=function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):(o["on"+t]=function(){return r.call(e,window.event)},e.attachEvent("on"+t,o["on"+t]))},t.removeEvent=function(e,t,r,n){e.removeEventListener?e.removeEventListener(t,r,n||!1):e.detachEvent("on"+t,o["on"+t]||noop)},t.isError=function(e){var t={}.toString.call(e);return r(e)&&"[object Error]"===t||"[object Exception]"===t||e instanceof Error},t.getXPath=function i(e,t){var r=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"",o=e.tagName.toLowerCase();return e.parentNode&&e.parentNode.tagName&&t-1!=0?i(e.parentNode,t-1)+" > "+o.toLowerCase()+r+n:o+r+n}},5:function(e,t,r){function n(e,t){var r=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;if(r&&r.timing){var n=r.setResourceTimingBufferSize||r.webkitSetResourceTimingBufferSize;n&&n.call(r,200);var s={sampleRate:.1,isCalEntry:!1,dirtyThreshold:6e4,scriptThreshold:250,cssThreshold:250,imgThreshold:500};t&&(t.scriptThreshold!==undefined&&o.isNumber(t.scriptThreshold)&&t.scriptThreshold<=s.scriptThreshold&&(t.scriptThreshold=s.scriptThreshold),t.cssThreshold!==undefined&&o.isNumber(t.cssThreshold)&&t.cssThreshold<=s.cssThreshold&&(t.cssThreshold=s.cssThreshold),t.imgThreshold!==undefined&&o.isNumber(t.imgThreshold)&&t.imgThreshold<=s.imgThreshold&&(t.imgThreshold=s.imgThreshold));var c=o.extend(s,t),d={scriptLog:function(){var t={code:3};return t.pid=e.pid,t.page=window.location.href.split("?")[0],t.sampleRate=c.sampleRate,t},scriptPageLog:function(){var e=this.scriptLog();this.needSend=!0;var t=r.timing,n=t.navigationStart,o=this.collectPerformanceTiming(t);for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return e.firstPaintTime=this.collectFirstPaint(t,n),this.collectNetworkInformation()&&(e.effectiveType=this.collectNetworkInformation()),e},scriptEntryLog:function(){var e=this.scriptLog(),t=r.getEntriesByType("resource");return e.entry=JSON.stringify(this.collectEntries(t)),e},collectPerformanceTiming:function(e){var t={};t.loadTime=e.loadEventEnd-e.fetchStart,t.domReadyTime=e.domComplete-e.domInteractive,t.readyStart=e.fetchStart-e.navigationStart,t.redirectTime=e.redirectEnd-e.redirectStart,t.appcacheTime=e.domainLookupStart-e.fetchStart,t.unloadEventTime=e.unloadEventEnd-e.unloadEventStart,t.lookupDomainTime=e.domainLookupEnd-e.domainLookupStart,t.connectTime=e.connectEnd-e.connectStart,t.requestTime=e.responseEnd-e.requestStart,t.initDomTreeTime=e.domInteractive-e.responseEnd,t.loadEventTime=e.loadEventEnd-e.loadEventStart,t.tillDomLookupEndTime=e.domainLookupEnd-e.navigationStart,t.tillResponseEndTime=e.responseEnd-e.navigationStart,t.tillDomReadyTime=e.domInteractive-e.navigationStart,t.totalTime=e.loadEventEnd-e.navigationStart;for(var r in t)t.hasOwnProperty(r)&&(!o.isNumber(t[r])||o.isNaN(t[r])||t[r]<0?t[r]=-1:t[r]>=c.dirtyThreshold?t[r]=-2:t[r]=parseFloat(t[r].toFixed(2)));return t},collectFirstPaint:function(e,t){var r;if(window.chrome&&window.chrome.loadTimes?r=1e3*window.chrome.loadTimes().firstPaintTime:o.isNumber(e.msFirstPaint)&&(r=e.msFirstPaint),r===undefined||!o.isNumber(r)||o.isNaN(r))return-1;var n;return n=r>=t?parseFloat((r-t).toFixed(2)):-1,n>=c.dirtyThreshold&&(n=-2),n},collectNetworkInformation:function(){if(navigator.connection&&navigator.connection.effectiveType)return navigator.connection.effectiveType},collectEntries:function(e){for(var t,r={},n=0;n<e.length;n++)t=e[n].responseEnd-e[n].fetchStart,(0===e[n].decodedBodySize||!o.isNumber(t)||o.isNaN(t)||"script"===e[n].initiatorType&&t>=c.scriptThreshold||"css"===e[n].initiatorType&&t>=c.cssThreshold||"img"===e[n].initiatorType&&t>=c.imgThreshold)&&(r[e[n].name]={size:e[n].decodedBodySize,type:e[n].initiatorType,loadTime:t});return r},checkDirtyIndexes:function(t){var r=!0;for(var n in t)if(t.hasOwnProperty(n)&&-2===t[n]){r=!1,e._warn("数据"+n+"没有被采集到，本条日志作废");break}return r},getPagePerformance:function(){var t=this;try{var r=t.scriptPageLog();r.base=a,c.isCalEntry&&(r=o.extend(r,t.scriptEntryLog())),t.checkDirtyIndexes(r)&&e.log(r)}catch(n){e.logError(n,{pid:"fsp",code:12,c4:e.pid})}}},l=/iPad|iPod|iPhone/.test(navigator.userAgent),u=l?"pagehide":"beforeunload";i(window,u,function(){/loaded|complete/.test(document.readyState)&&d.getPagePerformance()}),e._warn("性能监控已打开")}}var o=r(0),i=o.addEvent,a="/fsp.1.3";e.exports=n}});